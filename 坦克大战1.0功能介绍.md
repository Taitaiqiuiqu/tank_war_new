# 坦克大战 1.0 功能介绍

本文档详细介绍了坦克大战 1.0 版本的功能特性及操作逻辑。

## 1. 游戏模式

游戏包含三种主要模式：

### 1.1 单机模式 (Single Player)
*   **目标**: 消灭所有敌人，保护基地（老鹰）。
*   **流程**:
    1.  在主菜单选择“单机模式”。
    2.  进入设置界面，选择你的坦克外观（使用 `<` 和 `>` 按钮）。
    3.  选择地图（支持默认地图和自定义地图）。
    4.  点击“开始游戏”进入战斗。
*   **胜利条件**: 消灭所有敌方坦克。
*   **失败条件**: 玩家生命值耗尽或基地被摧毁。

### 1.2 联机模式 (Multiplayer)
*   **类型**: 局域网 (LAN) / IP 直连。
*   **角色**:
    *   **房主 (Host)**: 创建房间，选择地图，等待玩家加入。
    *   **客户端 (Client)**: 搜索局域网内的房间或输入 IP 地址加入。
*   **流程**:
    1.  在主菜单选择“联机模式”。
    2.  **大厅界面**:
        *   输入用户名。
        *   **创建房间**: 点击“创建房间”成为房主，进入房间等待界面。
        *   **加入房间**: 在列表中选择房间点击“加入房间”，或直接输入 IP 加入。
    3.  **房间界面**:
        *   房主选择地图。
        *   双方选择各自的坦克外观。
        *   双方点击“准备”。
        *   房主点击“开始游戏”。
*   **同步机制**:
    *   位置、动作、生命值、地图破坏、特效（爆炸、出生星星）均实时同步。
    *   支持断线重连（基础）。

### 1.3 地图编辑器 (Map Editor)
*   **功能**: 允许玩家创建、编辑、保存和加载自定义地图。
*   **操作**:
    *   **工具栏**: 位于屏幕底部。
    *   **工具选择**: 点击按钮或使用键盘快捷键 `1-8`。
        *   `1`: 砖墙 (可被子弹摧毁)
        *   `2`: 钢墙 (不可摧毁)
        *   `3`: 草地 (隐藏坦克)
        *   `4`: 河流 (子弹可过，坦克不可过)
        *   `5`: 基地 (老鹰，被毁即输)
        *   `6`: 橡皮擦 (清除物体)
        *   `7`: 玩家出生点 (支持多个)
        *   `8`: 敌人出生点 (支持多个)
    *   **绘制**: 左键点击或拖动在地图上绘制。
    *   **擦除**: 右键点击擦除，或使用橡皮擦工具左键绘制。
    *   **保存/加载**: 输入地图名称，点击“保存”或“加载”。
    *   **清空**: 点击“清空”重置地图。
*   **特性**:
    *   支持自定义地图名称。
    *   支持放置多个玩家和敌人出生点。
    *   自动处理窗口大小调整，保证编辑区域完整。

## 2. 游戏机制

### 2.1 坦克系统
*   **玩家坦克**:
    *   生命值: 3条命。
    *   护盾: 出生/重生时有短暂无敌护盾。
    *   移动: WASD 或 方向键控制。
    *   射击: 空格键。
*   **敌方坦克**:
    *   AI控制，自动寻路和攻击。
    *   从指定的敌人出生点生成。
    *   生成前会有闪烁星星特效。

### 2.2 战斗系统
*   **子弹**:
    *   玩家和敌人均可发射子弹。
    *   子弹相互碰撞会抵消。
    *   击中砖墙会销毁砖墙。
    *   击中钢墙无效。
*   **伤害**:
    *   子弹击中坦克扣除生命值。
    *   生命值归零坦克爆炸。

### 2.3 地形系统
*   **砖墙**: 阻挡移动，阻挡子弹，可被摧毁。
*   **钢墙**: 阻挡移动，阻挡子弹，不可摧毁。
*   **草地**: 不阻挡移动，不阻挡子弹，但在草地上的坦克会被遮挡（视觉效果）。
*   **河流**: 阻挡移动，不阻挡子弹。
*   **基地**: 阻挡移动，可被摧毁。

## 3. 操作指南

| 动作 | 按键 |
| :--- | :--- |
| **移动** | `W`, `A`, `S`, `D` 或 `↑`, `↓`, `←`, `→` |
| **射击** | `Space` (空格) |
| **菜单选择** | 鼠标点击 |
| **地图编辑** | 鼠标左键绘制，右键擦除 |
| **工具快捷键** | `1`-`8` (编辑器内) |
| **退出** | `Esc` (部分界面) |

## 4. 技术特性
*   **图形**: 使用 Pygame 渲染，支持自定义素材。
*   **UI**: 使用 Pygame_GUI 构建现代化界面。
*   **网络**: 基于 TCP/UDP 的自定义网络协议，支持局域网发现。
*   **数据**: 地图使用 JSON 格式存储，易于分享和修改。
